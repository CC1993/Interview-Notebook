# 参考资料

- 简明 Python 教程
- [Github：interview_python](https://github.com/taizilongxu/interview_python)
- [StackOverflow : Python](https://stackoverflow.com/questions/tagged/python)
- [Programming FAQ](https://docs.python.org/3.5/faq/programming.html)

# 基本概念

## 对象

Python 中用到的任何东西都被称为对象。

## 缩进

同一层次的语句必须拥有相同的缩进。

## 逻辑行与物理行

可以将多个逻辑行写在一个物理行中，需要用分号分割，不过最好不要这么做。

```python
a = 1; b = 2
```

可以将一个逻辑行写在多个物理行中，需要在行末加 \ 。

```python
s = "abcd\
efgh"
```

# 控制台输入输出

## 输出

print 函数会自动加换行符，可以在 print 之后加逗号 , 来取消换行。

```python
print "hello world"
```

## 输入

```python
guess = int(raw_input('Enter an integer : '))
```

# 作为命令行脚本

第一行注释告诉 Linux/Unix 系统当执行程序的时候，它应该使用哪个 Python 解释器。

```python
#!/usr/bin/python
print 'Hello World'
```

需要先给脚本设置可执行的权限。

```html
$ chmod a+x hello-world.py
$ ./hello-world.py
```

通过以下命令可以把一个文件夹下的脚本都添加到 PATH 目录下，则可以在任何地方运行该脚本。

```html
PATH=$PATH:/home/username/dir
```

# 字符串

## 引号

单引号和双引号表示的字符串完全相同，三引号表示的字符串中间可以有单引号和双引号，并且可以换行。

```html
'''
This is the first line.
This is the second line.
"What's your name?," I asked.
He said "Bond, James Bond."
'''
```

## 编码方式

Python 2 默认的编码方式为 ASCII 码，如果要使用中文的话需要在文件开头指定编码方式为 utf-8。Python 3 默认的编码方式为 uft-8。

```python
# coding=utf-8
print "中文"
```

## 操作

```python
s = "abc"
print len(s)
print s[0]
```

in 操作符可以判断一个给定字符串是否在另一个字符串中。

find() 查找一个字符串在另一个字符串中的位置，如果查找失败返回 -1。

```python
s = 'abcd'
print s.startswith('ab')  # True
print 'bc' in s           # True
print s.find('bc')        # 1
```

## 特殊字符串

自然字符串用 r 作为前缀，当不想让字符串中的内容转义时使用，比如正则表达式。

```html
r"New lines are indicated by \n"
```

Unicode 是书写国际文本的标准方法。在处理文本文件的时候应该使用 Unicode 字符串，特别是这个文件含有用非英语的语言写的文本时使用。

```html
u"This is a Unicode string."
```

# 运算符

|  运算符 | 说明  |
| :---: | :---: |
|  ** | 幂  |
|  // | 取整除  |
|  % | 取模，不取整  |
|  ~ | 按位翻转，-(x+1) |
|  and | 与  |
|  or | 或  |
|  not | 非  |

```python
print 2 ** 3     # 8
print 2.2 % 2    # 0.2
print 5 / 2.0    # 2.5
print 5 // 2.0   # 2.0
print ~2         # -3
```

# 控制流

## 条件语句

```python
a = True
b = False
if a:
    y = 1
elif b:
    y = 2
else:
    y = 3
```

## 循环

range(m, n, step)，返回一个从 m 到 n，步长为 stap 的序列，不包含 n。

for 后面的 else 语句在 break 退出的情况下不会执行：

```
for i in range(1, 5):
      print i
else:
      print 'The for loop is over'
```

```html
1
2
3
4
The for loop is over
```

# 函数

## 基本使用

```
def say_hello():
    print 'hello world!'

say_hello()
```

## 默认参数

```
def say(message, times=1):
    print message * times


say('Hello')
say('World', 5)
```

```html
Hello
WorldWorldWorldWorldWorld
```

## 关键参数

使用名字而不是位置来指定参数。

```
def func(a, b=5, c=10):
    print 'a is', a, 'and b is', b, 'and c is', c


func(3, 7)
func(25, c=24)
func(c=50, a=100)
```

## return

没有 return 语句的函数默认 return None，None 在 Python 中是指一个没有任何值的特殊类型。

## DocStrings

使用函数的 \_\_doc\_\_ 属性可以返回函数中的文档字符串。

```
def printMax(x, y):
'''Prints the maximum of two numbers.
The two values must be integers.'''
x = int(x)
y = int(y)
if x > y:
    print x, 'is maximum'
else:
    print y, 'is maximum'

printMax(3, 5)
print printMax.__doc__
```

# 模块

模块基本上就是一个包含定义函数和变量的文件，使用 import 语句导入一个模块。

```
import sys
```

.pyc 是字节文件，会比源文件快很多，而且与平台无关。

使用 from sys import argv 之后可以直接在代码中使用 argv，而不用 sys.argv。但是为了易读性，最好不要用这种方式。

\_\_name\_\_ 属性为一个模块的名字。

```
if __name__ == '__main__':
    print 'This program is being run by itself'
else:
    print 'I am being imported from another module
```

创建一个 python 文件之后，要使得另一个 python 文件可以使用它，需要把它放在这个文件的同目录下，或者把它放到 sys.path 目录下。

使用 . 运算符来引用模块中的成员。

dir() 函数可以列出一个模块的函数、变量和类。

# 序列

## 数据结构

### 列表

一组有序的集合。有序并不说排好序了，而是有顺序。

使用 [ ] 来定义一个列表。

```python
# This is my shopping list
shop_list = ['apple', 'mango', 'carrot', 'banana']
print 'I have', len(shop_list), 'items to purchase.'
print 'These items are:',  # Notice the comma at end of the line
for item in shop_list:
    print item,
shop_list.append('rice')
shop_list.sort()
del shop_list[0]
```

```html
I have 4 items to purchase.
These items are: apple mango carrot banana
```

### 元组

元组不可变。

一个元组可以包含另一个元组。

使用 ( ) 定义一个元组。

```python
zoo = ('wolf', 'elephant', 'penguin')
new_zoo = ('monkey', 'dolphin', zoo)
print 'Last animal brought from old zoo is', new_zoo[2][2]
```

元组可以用在打印语句中。

```python
age = 22
name = 'Swaroop'
print '%s is %d years old' % (name, age)
print 'Why is %s playing with that python?' % name
```

### 字典

必须使用不可变的对象作为键。

d = {key1 : value1, key2 : value2 } 定义一个字典。

```python
d = {'a': 1, 'b': 2}
print d
print d.items()
print 'a' in d
```

```html
{'a': 1, 'b': 2}
[('a', 1), ('b', 2)]
True
```

## 操作

### 索引与切片

字符串，元组和列表都是序列，序列主要具有索引和切片操作；

简单复制语句不会创建拷贝，要拷贝一个序列时用切片操作：

```
mylist = shoplist[:]
```

### 列表综合

```
list_one = [2, 3, 4]
list_two = [2 * i for i in list_one if i > 2]
print list_two
```

```html
[6, 8]
```

### 作为参数传递

```python
def power_sum(power, *args):
    total = 0
    for i in args:
        total += pow(i, power)
    return total


print power_sum(2, 1, 2, 3)  # 14
```

由于在 args 变量前有 \* 前缀，所有多余的函数参数都会作为一个元组存储在 args 中。如果使用的是 \*\* 前缀，多余的参数则会被认为是一个字典的 键 / 值 对。

# 面向对象

## self

self 类似于 Java 中的 this 指针。

## 类

```
class Person:
    pass # An empty block

p = Person()
print p
```

## 方法

方法和函数最主要的区别是方法需要传入一个 self 变量。

```
class Person:
    def say_hi(self):
        print 'Are you OK？'


p = Person()
p.say_hi()
```

## \_\_init\_\_()

构造函数

```
class Person:
    def __init__(self, name):
        self.name = name

    def say_hi(self):
        print 'Hello, my name is', self.name


p = Person('Swaroop')
p.say_hi()
```

## \_\_del\_\_()

析构函数

## 类与对象的方法

成员名有双下划线前缀 \_\_ ，比如 \_\_init\_\_()，则为私有成员。如果自己定义的类中某个成员想定义为私有成员，则在该成员名前加单下划线 \_，虽然 Python 没有规定这样做可以把成员变成私有成员，但是可以作为一种编程约定来使用。

## 继承

```
class Person:
    def __init__(self, name, age):
        self.__name = name
        self.__age = age


class Worker(Person):
    def __init__(self, name, age, salary):
        Person.__init__(self, name, age)
        self.salary = salary
```

# 输入 / 输出

## 文件

```
poem = '''\
Programming is fun
When the work is done
if you wanna make your work also fun:
use Python!
'''
f = file('poem.txt', 'w')
f.write(poem)
f.close()

f = file('poem.txt')
while True:
    line = f.readline()
    if len(line) == 0:
        break
    print line,  # 会把换行符也读进来，因此最后不需要以换行的方式打印
f.close()
```

## 序列化

pickle 模块可以用于存取一个对象。

cPickle 功能完全相同，但是用 c 语言编写的，速度快 1000 倍；

```
import cPickle as p

shop_list_file = 'shop_list.data'
shop_list = ['apple', 'mango', 'carrot']

f = file(shop_list_file, 'w')
p.dump(shop_list, f)
f.close()

del shop_list

f = file(shop_list_file)
stored_list = p.load(f)
print stored_list
```

# 异常

## try-except

可以跟上一个 else 从句，当没有异常发生时会执行；

```
import sys

try:
    s = raw_input('Enter something --> ')
except EOFError:
    print '\nWhy did you do an EOF on me?'
    sys.exit()  # exit the program
except:
    print '\nSome error/exception occurred.'
# here, we are not exiting the program
print 'Done'
```

## 引发异常

raise 语句可以引发一个异常，引发的异常应该是 Error 或者 Exception 的类或者子类；

```
class MyException(Exception):
    def __init__(self):
        self.name = 'exception'


try:
    raise MyException
except MyException, e:
    print e.name
else:
    print 'nothing'
```

## finally

finally 可以保证一个语句块无论如何都会执行。

# 标准模块

## sys 模块

sys.argv 参数列表。

sys.stdin / sys.stdout / sys.stderr。

## os 模块

该模块包含了普遍的操作系统功能，使程序能够与平台无关；

os.name 字符串指示你正在使用的平台。比如对于 Windows，它是 'nt' ，而对于 Linux/Unix 用户，它是 'posix'。

os.getcwd() 函数得到当前工作目录，即当前 Python 脚本工作的目录路径。

os.getenv() 和 os.putenv() 函数分别用来读取和设置环境变量。

os.listdir() 返回指定目录下的所有文件和目录名。

os.remove() 函数用来删除一个文件。

os.system() 函数用来运行 shell 命令。

os.linesep 字符串给出当前平台使用的行终止符。例如，Windows 使用 '\r\n'，Linux 用 '\n' 而 Mac 使用 '\r'。

os.path.split() 函数返回一个路径的目录名和文件名。

```
os.path.split('/home/swaroop/byte/code/poem.txt')
('/home/swaroop/byte/code', 'poem.txt')
```

os.path.isfile() 和 os.path.isdir() 函数分别检验给出的路径是一个文件还是目录。类似地，os.path.exists() 函数用来检验给出的路径是否真地存在。

# 更多内容

## 特殊的方法

特殊的方法主要用于模仿某个行为。

| 名称 | 说明 |
| ------------ | ------------ |
| __init__(self,...) | 这个方法在新建对象恰好要被返回使用之前被调用。 |
| __del__(self) | 恰好在对象要被删除之前调用。 |
| __str__(self) | 在我们对对象使用 print 语句或是使用 str() 的时候调用。 |
| __lt__(self, other) | 当使用 小于 运算符（<）的时候调用。类似地，对于所有的运算符（+，> 等等）都有特殊的方法。 |
| __getitem__(self, key) | 使用 x[key] 索引操作符的时候调用。 |
| __len__(self) | 对序列对象使用内建的 len() 函数的时候调用。 |

## lambda 形式

lambda 语句被用来创建新的函数对象，并且在运行时返回它们。

```python
def make_repeater(n):
    return lambda s: s*n


twice = make_repeater(2)
print twice('word')
print twice(5)
```

```
wordword
10
```

## exec 和 eval()

```
exec 'print "Hello World"'
eval('2*3')
```

## assert 语句

asser t 断言在非真时会引发一个 AssertionError。

```
my_list = ['item']
assert len(my_list) == 1
```